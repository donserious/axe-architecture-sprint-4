[Мотивация]

1. Раннее выявление проблем
   Предотвращение сбоев: Мониторинг позволяет оперативно выявлять аномалии и сбои в работе системы, что помогает
   предотвратить серьезные проблемы, такие как потеря данных или длительные простои.
   Устранение узких мест: Системы мониторинга могут помочь выявить узкие места в процессах, например, в обработке
   заказов или загрузке страниц, что позволяет своевременно принимать меры.
2. Улучшение производительности
   Оптимизация ресурсов: Мониторинг использования ресурсов (CPU, память, сеть) позволяет оптимизировать их распределение
   и избежать перегрузок, что улучшает общую производительность системы.
   Анализ производительности: Сбор данных о времени отклика и производительности различных компонентов системы помогает
   в их оптимизации.
3. Повышение уровня обслуживания клиентов
   Уведомления о статусах: Система мониторинга может автоматически уведомлять клиентов о статусах их заказов, что
   повышает уровень удовлетворенности и доверия.
   Снижение времени реакции: Быстрое реагирование на проблемы и запросы клиентов благодаря мониторингу позволяет
   улучшить качество обслуживания.
4. Аналитика и отчетность
   Сбор данных для анализа: Мониторинг предоставляет данные, которые можно использовать для анализа производительности,
   выявления трендов и принятия обоснованных решений.
   Отчеты для руководства: Возможность генерировать отчеты о состоянии системы и производительности процессов для
   руководства, что помогает в стратегическом планировании.
5. Улучшение безопасности
   Выявление угроз: Мониторинг может помочь в выявлении подозрительной активности и потенциальных угроз безопасности,
   что позволяет своевременно реагировать на инциденты.
   Аудит и соответствие: Системы мониторинга могут обеспечивать аудит действий пользователей и систем, что важно для
   соблюдения стандартов безопасности и регуляторных требований.
6. Поддержка принятия решений
   Информированность: Наличие актуальной информации о состоянии системы и производительности процессов позволяет
   руководству принимать более обоснованные решения.
   Планирование ресурсов: Данные мониторинга помогают в планировании ресурсов и бюджетировании, что способствует более
   эффективному управлению.

[Выбор подхода к мониторингу]

Рекомендации по применению подходов
Для API и микросервисов:
Использовать RED для мониторинга производительности и доступности API. Это позволит быстро реагировать на проблемы с
обработкой заказов и взаимодействием с внешними продавцами.
Для серверов и инфраструктуры:
Применять USE для мониторинга ресурсов серверов, таких как CPU, память и дисковое пространство. Это поможет выявить
узкие места в инфраструктуре и оптимизировать использование ресурсов.
Для общего мониторинга системы:
Использовать Четыре золотых сигнала для комплексного мониторинга всей системы, включая как приложения, так и
инфраструктуру. Это обеспечит целостное понимание состояния системы и позволит выявлять проблемы на разных уровнях.

[Метрики]

Number of dead-letter-exchange letters in RabbitMQ
Количество сообщений, которые были отправлены в dead-letter exchange (DLX) в RabbitMQ. Это происходит, когда сообщения
не могут быть обработаны.
Number of message in flight in RabbitMQ
Количество сообщений, которые находятся в процессе обработки и еще не были подтверждены потребителем.
Number of requests (RPS) for internet shop API
Количество запросов в секунду. Позволяет оценить нагрузку на API и выявить пики активности
Number of requests (RPS) for CRM API
Количество запросов в секунду. Позволяет оценить нагрузку на API и выявить пики активности
Number of requests (RPS) for MES API
Количество запросов в секунду. Позволяет оценить нагрузку на API и выявить пики активности
Number of requests (RPS) per user for internet shop API
Количество запросов в секунду. Позволяет оценить нагрузку на API и выявить пики активности
Number of requests (RPS) per user for CRM API
Количество запросов в секунду. Позволяет оценить нагрузку на API и выявить пики активности
Number of requests (RPS) per user for MES API
Количество запросов в секунду. Позволяет оценить нагрузку на API и выявить пики активности
CPU % for shop API
Процент использования CPU.Высокое использование CPU может указывать на перегрузку или неэффективный код.
CPU % for CRM API
Процент использования CPU.Высокое использование CPU может указывать на перегрузку или неэффективный код.
CPU % for MES API
Процент использования CPU.Высокое использование CPU может указывать на перегрузку или неэффективный код.
Memory Utilisation for shop API
Использование RAM памяти. Высокое использование памяти может указывать на утечки памяти или неэффективное использование
ресурсов.
Memory Utilisation for CRM API
Использование RAM памяти. Высокое использование памяти может указывать на утечки памяти или неэффективное использование
ресурсов.
Memory Utilisation for MES API
Использование RAM памяти. Высокое использование памяти может указывать на утечки памяти или неэффективное использование
ресурсов.
Memory Utilisation for shop db instance
Использование RAM памяти. Высокое использование памяти может указывать на утечки памяти или неэффективное использование
ресурсов.
Memory Utilisation for MES db instance
Использование RAM памяти. Высокое использование памяти может указывать на утечки памяти или неэффективное использование
ресурсов.
Number of connections for shop db instance
Количество активных соединений. Высокое количество соединений может указывать на нагрузку
Number of connections for MES db instance
Количество активных соединений. Высокое количество соединений может указывать на нагрузку
Response time (latency) for shop API
Время отклика (задержка) для API. Позволяет оценить производительность API и уровень удовлетворенности пользователей.
Response time (latency) for CRM API
Время отклика (задержка) для API. Позволяет оценить производительность API и уровень удовлетворенности пользователей.
Response time (latency) for MES API
Время отклика (задержка) для API. Позволяет оценить производительность API и уровень удовлетворенности пользователей.
Size of S3 storage
Объем используемого хранилища. Позволяет отслеживать использование хранилища и планировать расходы.
Size of shop db instance
Объем данных в экземпляре базы данных. Позволяет отслеживать рост базы данных и планировать масштабирование.
Size of MES db instance
Объем данных в экземпляре базы данных. Позволяет отслеживать рост базы данных и планировать масштабирование.
Number of HTTP 200 for shop API
Количество успешных ответов. Помогает отслеживать успешность работы.
Number of HTTP 200 for CRM API
Количество успешных ответов. Помогает отслеживать успешность работы.
Number of HTTP 200 for MES API
Количество успешных ответов. Помогает отслеживать успешность работы.
Number of HTTP 500 for shop API
Количество ошибок ответов. Помогает отслеживать успешность работы.
Number of HTTP 500 for CRM API
Количество ошибок ответов. Помогает отслеживать успешность работы.
Number of HTTP 500 for MES API
Количество ошибок ответов. Помогает отслеживать успешность работы.
Number of HTTP 500 for shop API
Количество ошибок ответов. Помогает отслеживать успешность работы.
Number of simultanious sessions for shop API
Количество одновременных сессий для API. Позволяет отслеживать нагрузку на API и выявлять пики активности пользователей
Number of simultanious sessions for CRM API
Количество одновременных сессий для API. Позволяет отслеживать нагрузку на API и выявлять пики активности пользователей
Number of simultanious sessions for MES API
Количество одновременных сессий для API. Позволяет отслеживать нагрузку на API и выявлять пики активности пользователей
Kb tranferred (received) for shop API
Принятый объем данных в килобайтах (Kb). Полезно для оценки нагрузки и производительности
Kb tranferred (received) for CRM API
Принятый объем данных в килобайтах (Kb). Полезно для оценки нагрузки и производительности
Kb tranferred (received) for MES API
Принятый объем данных в килобайтах (Kb). Полезно для оценки нагрузки и производительности
Kb provided (sent) for shop API
Отправленный объем данных в килобайтах (Kb). Высокий объем отправленных данных может указывать на активное использование
API
Kb provided (sent) for CRM API
Отправленный объем данных в килобайтах (Kb). Высокий объем отправленных данных может указывать на активное использование
API
Kb provided (sent) for MES API
Отправленный объем данных в килобайтах (Kb). Высокий объем отправленных данных может указывать на активное использование
API
Мои метрики:
Disk utilization for All.
Утилизация жесткий дисков.
Traffic on Network Interface for All.
Нагрузка на сетевой интерфейс
SWAP for All.
Контроль свап памяти на серверах.

[План действий]
Стек elasticsearch(поисковый движок) + logstash(инструмент для сбора журналов) +
kibana (веб-интерфейс для построения графиков) + FileBeat(сборщик логов)
Стек exporters(сборщик метрик) + prometheus(агрегация метрик) + grafana(отображение метрик в графиках)

[Показатели насыщенности]

1. Использование CPU
   Пороговое значение: 80% (время, когда использование CPU превышает 80% в течение 5 минут).
   Действия при превышении:
   Создание тикета в системе управления инцидентами для уведомления команды DevOps.
   Автоматическое масштабирование: если используется облачная инфраструктура, добавить дополнительные инстансы для
   распределения нагрузки.
   Анализ логов для выявления причин высокой загрузки (например, неэффективные запросы или утечки памяти).
2. Использование памяти
   Пороговое значение: 75% (время, когда использование памяти превышает 75% в течение 5 минут).
   Действия при превышении:
   Создание тикета для уведомления команды о необходимости анализа и оптимизации использования памяти.
   Мониторинг активных процессов для выявления утечек памяти или неэффективных операций.
   Автоматическое масштабирование: если возможно, добавить дополнительные ресурсы.
3. Количество активных соединений к базе данных
   Пороговое значение: 80% от максимального количества соединений, разрешенного для базы данных.
   Действия при превышении:
   Создание тикета для уведомления команды о необходимости анализа нагрузки на базу данных.
   Оптимизация запросов и индексов для снижения нагрузки.
   Добавление инстансов базы данных или использование репликации для распределения нагрузки.
4. Количество сообщений в очереди RabbitMQ
   Пороговое значение: 1000 сообщений в очереди.
   Действия при превышении:
   Создание тикета для уведомления команды о необходимости анализа производительности обработчиков сообщений.
   Увеличение количества рабочих процессов для обработки сообщений.
   Анализ логов для выявления причин задержек.
5. Время отклика API
   Пороговое значение: 500 мс для 95% запросов.
   Действия при превышении:
   Создание тикета для уведомления команды о необходимости анализа производительности API.
   Оптимизация кода и запросов для снижения времени отклика.
   Мониторинг и анализ логов для выявления узких мест.